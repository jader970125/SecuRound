@{
    ViewData["Title"] = "Mapa con Marcadores y Menú Lateral";
}

<h2 style="color: white;">SECUROUND</h2color>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
    #container {
        display: flex;
        gap: 10px;
    }

    #menu {
        width: 250px;
        padding: 10px;
        background: #f8f9fa;
        border: 1px solid #ddd;
        border-radius: 8px;
    }

    #map {
        flex: 1;
        height: 500px;
        border-radius: 12px;
    }
</style>

<div id="container">
    <!-- Menú lateral -->
    <div id="menu" style="background-color: #000000">
        <h4>Seleccionar marcadores</h4>
        <label><input type="checkbox" class="marker-toggle" value="centro" checked> Centro de Medellín</label><br>
        <label><input type="checkbox" class="marker-toggle" value="estadio" checked> Estadio Atanasio</label><br>
        <label><input type="checkbox" class="marker-toggle" value="pueblito" checked> Pueblito Paisa</label>
    </div>

    <!-- Mapa -->
    <div id="map"></div>
</div>

<script>
    var map = L.map('map').setView([6.2442, -75.5812], 12);

    // Capa base de OpenStreetMap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap'
    }).addTo(map);

    // Ícono personalizado
    var customIcon = L.icon({
        iconUrl: '/icons/marker.png',
        iconSize: [40, 40],
        iconAnchor: [20, 40],
        popupAnchor: [0, -40]
    });

    // Marcadores
    var marcadores = {
        centro: L.marker([6.2518, -75.5636], { icon: customIcon }).bindPopup("<b>Centro de Medellín</b>"),
        estadio: L.marker([6.2676, -75.5696], { icon: customIcon }).bindPopup("<b>Estadio Atanasio</b>"),
        pueblito: L.marker([6.2308, -75.5790], { icon: customIcon }).bindPopup("<b>Pueblito Paisa</b>")
    };

    // Mostrar todos los marcadores al inicio
    Object.values(marcadores).forEach(m => m.addTo(map));

    // Escuchar cambios en los checkboxes
    document.querySelectorAll(".marker-toggle").forEach(cb => {
        cb.addEventListener("change", function () {
            var marker = marcadores[this.value];
            if (this.checked) {
                marker.addTo(map);
            } else {
                map.removeLayer(marker);
            }
        });
    });
</script>
